% Chapter 7

\chapter{Conclusion}% Main chapter title

\label{Chapter7} % For referencing the chapter elsewhere, use \ref{Chapter7} 
In this chapter, the main goals of the thesis with respect to the problem statement stated in Chapter 1 and the ways the thesis is done are summarized in Section 7.1. Section 7.2 presents the works that are related to this thesis. In addition, how the thesis contributes to overcome the research problems is also presented in this section. Problems that have not been solved in the thesis are presented in Section 7.3, then some suggestions for further research are discussed in the last section.
%----------------------------------------------------------------------------------------

\section{General summarization}
The main goals of this thesis are to design a relational database model, and to develop a database application to store Obstructive Sleep Apnea (OSA) data and that is extensible for other bio-physiological data. To pursue the goals, the research problems are stated, the works that this thesis is based on are discussed, then the pros and cons of the related works on the problems are presented.\\
At first, a literature overview of sleep apnea and itsâ€™ characteristics are presented in Chapter 2. It is because the designed database model and database application are mainly used for storing and analyzing signals from this illness. Since the thesis uses the CESAR acquisition tool to collect data and EDF/EDF plus file format to backup data, their characteristics, i.e., collected sources, platform used, formats for transferring and storing data, supported functions and documents, etc. are carefully studied in Chapter 3. In addition, the requirements for both the database model and database application are analyzed. For database modeling, entities are derived from the observable signals and characteristics of OSA, and relationships between the entities are defined. The database modeling process is performed, which results the logical database model used in the thesis. For the database application, two wrappers are provided for importing data from real time sources and non-real time sources, then six experiments are performed to prove that the thesis has solved the research problems which are stated in Section Problem statement in Chapter 1. The main focuses of the experiments are the feasibility of the database design and the performance of the database application on a mobile device powered by Android. That is, the database application can perform multitasking, and can collect data from the CESAR acquisition tool for a whole night without losing data. At first, each function of the database application is evaluated separately, then stress tests are performed where the functions are simultaneously evaluated with high workloads.
\section{Related works}
There are many efforts to collect and store OSA signals data in an efficient way with respect to the used hardware. Since each clinic may determine which hardware platform to buy, the clinic defines its own methods to collect and manage the collected data based on the chosen hardware. Most of clinics do not share their the ways they manage the collected data, i.e., the Physionet databases, Nox Medical, but some of them offer a software package to export their data to a common file format, i.e, EDF file format. Currently, to store OSA signals, most of clinics choose to use files to store the collected data. For example, the Physionet databases use multiple files and file formats to keep a record, i.e., the record a01 that is used in the EDF import experiment is kept in 12 files in the Physionet databases. Unlike the Physionet databases, the EDF file format is chosen to use to store the OSA data in the DREAMS Apnea Database \citep{tcts}. At the time of writing, the OSA data are only stored in files, and a relational database is not considered yet. However, some relational databases and database management systems have provided to store other physiological sensor data, i.e., Management of Streaming Body Sensor Data for Medical Information Systems \citep{Alfonso}, A Database in Every Sensor \citep{Nicolas}. Therefore, a relational database model is considered to store OSA data, in which data from sensor kits can be collected and saved on a mobile device with minimizing resource usages and maximizing data usage, i.e., easy to extract, analyze, backup, restore, share, etc., with low power consumption, storage space and memory used, CPU used, etc. is necessary.
\section{Contributions}
This thesis presents a solution for an open database model and a database application for storing OSA monitoring data and other bio-physiology signals on Android devices. The database application allows to store monitoring data from the BITalino sensor kits, and to import existing polysomnogram data from EDF/EDF plus files. To avoid reinventing the wheel, the thesis makes use of the advantages from the CESAR acquisition tool, which has high performance, low resource usages, and stable when collecting data for long time. The CESAR acquisition tool provides an interface to send packets via TCP/IP; the database application therefore provides a friendly user interface to manage the connection from the tool to the application. The application allows multiple sensor sources to connect and store their data to the database on the device simultaneously. A list of current sources is presented via a graphical view, in which the status of each source is illustrated whether the source is active, saving its data to the database, or shows its data on a graph. Each sensor source is managed by a separate thread, which allows maximizing performance when collecting data in real time.\\
For backing up and restoring data, the database application provides two functions which are EDF/EDF plus importer and EDF/EDF plus exporter. It is because the storage space requirements are minimized when using these formats. Moreover, when sending or sharing data, the bandwidth used is low compared to other file formats. A user can import a EDF file by choosing the file from mass storage such as SD card via a graphical file chooser. A process bar indicates how many percent of a file have been imported, and a user can query, share, analyze, etc., on the imported part of the file. It is not logic for other data types, but it might be a good option for the bio-physiological data, because the file is treated as a stream of data. If a user needs only some parts of the file, the user does not need to wait for the whole file to be loaded.\\
By providing a relational database solution for storing polysomnogram data, the thesis can make use of SQL language and SQL function to analyze data directly on a mobile device. Moreover, the database application also allows users to easily choose parts of recordings, combine data from multiple channels to do comparison such as the quality of collected data, or to export to a EDF file for sharing purpose. Combining data from multiple channels also allows a patient to use different sensor data kits to collect data into one record.\\
Nonetheless, the database model and database application are designed in the way that provides maximum reliability and user friendliness. That is, the application takes the user experiment into consideration, which means many users prefer to interact with symbols and icons compared to text. The users do not need to have a user manual to use the application. However, to provide the users a comprehensive information how to use the application, a user manual is provided in Appendix \ref{AppendixA}. The reliability is proven via stress test in the last subsection of the evaluation chapter. That is, the application can manage all channels of 14 BITalino sensor kits while importing and exporting data without crashing, or losing data.\\
Therefore, the database model and database application that are provided in the thesis are considered efficient for storing, managing, and analyzing OSA signals, and other bio-physiological signals.
\section{Open problems}
\textbf{Considerations concerning the chosen platform}\\
The database application is required to run for a whole night or at least 12 hours without interruption. That is, it must not be suspended, or not be killed by the operative system. It is because the database application collects data from sensor sources in real time. However, the API guides from the Android developers \citep{AndroidAPIProcess} illustrates that Android might decide to kill a process at some point. The main goal of this action is to try to keep a certain amount of memory (RAM) for smooth experience, and to save battery as there are less applications using the phone's CPU. Once the application is killed, all components running in it are consequently destroyed. Victims that seem to be killed by Android are usually applications hosting activities that are not visible on screen. Currently, the CESAR acquisition tool is killed if the screen of a mobile device is off for a period of time, that causes the database application cannot receive data from the tool. The screen needs to be on during the collecting process which is inefficient. By studying the life cycle of the processes and application in Android, the database application currently does not have this problem, because it is a foreground process. As presented in the API guides for the life cycle of processes and application \citep{AndroidAPIProcessLifeCycle}, Android puts each process into an "importance hierarchy" based on the components of the process and the state of these components; the first priority in the list are foreground processes which are only killed as a last resort when memory is too low. Therefore, nothing can guarantee that an application is never killed by the system.\\\\
The SQLite database management system, which is used for implementing the designed database model, is integrated in the Android platform, and does not allow multiple threads read the database in parallel. As presented in SQLiteOpenHelper API\citep{AndroidAPISQLiteOpen}, the same object, which is a write database object, is returned regardless the get readable or get writable functions are called. Hence, using multiple reading threads to increase the database performance is not possible on the Android platform. Moreover, the SQLite uses dynamic types for storing data. That is, the data types need to be converted when saving and retrieving, and it is therefore causing poor performance.\\\\
\textbf{Considerations concerning the design and implementation}\\
The designs for the database model and database application are divided into two parts, the first part is a high level and platform independent, while the second part is a specific implementation, and is considered a proof of concept for the high level design. Therefore, the application might contains many bugs, and not handle all small problems which can cause the application crashed. The implementation is mainly focusing on proving the feasibility of the database model and database application designs, and is far away to be a commercial application.
\section{Future works}
This thesis provides a relational database model and a database application for storing OSA signals, and opens for storing other bio-physiological signals on a mobile device. In addition, the designs are platform independent, and they can therefore be implemented on either Android, iOS, Windows Phone, etc.\\\\
A suggestion for further research is to implement the relational database design on different mobile operations, then make a comparison between the implementations with respect to the experiments that are presented in the evaluation chapter. In addition, the database application provides a raw query interface that allows researchers to execute their SQL query statements. The researchers can also write their own mining modules as independent Android activities, then attach the modules to the last fragment in the database application. Hence, an other suggestion is to develop and evaluate different mining methods on the designed data for detecting if a patient has OSA problem. Nonetheless, a quality comparing between sensors can be performed by using multiple sensor sources to collect data simultaneously.\\\\
Beside the presented suggestions above, there are also some issues that need to be further investigated based on the current implementation of the database application. The first issue is the need to backup collected data to a external storage place such as a cloud server when the free space on the mobile device is at a specific threshold. Hence, it is necessary to have a thread which takes responsibility for backing up the collected data by exporting the old data to EDF files and send to a storage place. This thread does not need to keep running all the time, it is created when the size of the database reaches the threshold. The second issue is the need for remotely querying. That is, physicians are allowed remotely querying data on the mobile device of a patient, or can get some part of data by sending a request to the database application which is installed on patient's mobile device.\\
